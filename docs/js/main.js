"use strict";function displaySearchQuery(e){function t(e){searchBarInput.value=e.target.dataset.address;var t=e.target.dataset.city+", "+e.target.dataset.address;clearDepartmentList(),a(e.target.dataset),initMap(t)}function a(e){var t=departmentBlock.querySelector("#location"),a=departmentBlock.querySelector("#address"),n=departmentBlock.querySelector("#email"),r=departmentBlock.querySelector("#phone");e.country&&(t.innerHTML='<i class="material-icons department-block__icon noUserSelect">location_city</i>',t.innerHTML+=e.country),e.city&&(t.innerHTML+=", "+e.city),e.address&&(a.innerHTML='<i class="material-icons department-block__icon noUserSelect">place</i>',a.innerHTML+=e.address),e.email&&(n.innerHTML='<i class="material-icons department-block__icon noUserSelect">email</i>',n.innerHTML+=e.email),e.phone&&(r.innerHTML='<i class="material-icons department-block__icon noUserSelect">phone</i>',r.innerHTML+=e.phone),departmentBlock.classList.remove("department-block--display-none"),mapBlock.classList.remove("department-map--display-none")}departmentBlock.classList.add("department-block--display-none"),mapBlock.classList.add("department-map--display-none");var n=e.target.value,r="https://api.privatbank.ua/p24api/pboffice?json&address="+n;0===n.length?(searchBarClearBtn.classList.add("search-bar__icon-clear--display-none"),clearDepartmentList()):(searchBarClearBtn.classList.remove("search-bar__icon-clear--display-none"),fetch(r).then(function(e){return e.json()}).then(function(e){clearDepartmentList();for(var a in e)if(a<10){var n=document.createElement("li");n.classList.add("department-list__item"),n.addEventListener("click",t),n.innerHTML='<i class="material-icons search-bar__icon-search  noUserSelect">search</i>',n.innerHTML+=e[a].address,n.setAttribute("data-city",e[a].city),n.setAttribute("data-country",e[a].country),n.setAttribute("data-address",e[a].address),n.setAttribute("data-email",e[a].email),n.setAttribute("data-phone",e[a].phone),n.setAttribute("data-name",e[a].name),departmentList.appendChild(n)}}).catch(function(e){console.log(e.message)}))}function clearInput(){searchBarClearBtn.classList.add("search-bar__icon-clear--display-none"),departmentBlock.classList.add("department-block--display-none"),mapBlock.classList.add("department-map--display-none"),searchBarInput.value="",clearDepartmentList(),searchBarInput.focus()}function clearDepartmentList(){for(;departmentList.firstChild;)departmentList.removeChild(departmentList.firstChild)}function initMap(e){var t=e;geocoder=new google.maps.Geocoder;var a={zoom:10,center:new google.maps.LatLng(50.27,30.3),mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},navigationControl:!0,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("map"),a),geocoder&&geocoder.geocode({address:t},function(e,a){if(a==google.maps.GeocoderStatus.OK)if(a!=google.maps.GeocoderStatus.ZERO_RESULTS){map.setCenter(e[0].geometry.location);var n=new google.maps.InfoWindow({content:"<b>"+t+"</b>",size:new google.maps.Size(150,50)}),r=new google.maps.Marker({position:e[0].geometry.location,map:map,title:t});google.maps.event.addListener(r,"click",function(){n.open(map,r)})}else console.log("No results found");else console.log("Geocode was not successful for the following reason: "+a)})}var searchBarInput=document.querySelector("#searchBarInput"),searchBarClearBtn=document.querySelector(".search-bar__icon-clear"),departmentList=document.querySelector("#department-list"),departmentBlock=document.querySelector(".department-block"),mapBlock=document.querySelector("#map");searchBarInput.addEventListener("keyup",displaySearchQuery),searchBarClearBtn.addEventListener("click",clearInput);var geocoder=void 0,map=void 0;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsic2VhcmNoQmFyQ2xlYXJCdG4iLCJhZGRFdmVudExpc3RlbmVyIiwic2VhcmNoQmFySW5wdXQiLCJlIiwiY2hvb3NlZERlcGFydG1lbnRGdWxsQWRkcmVzcyIsInRhcmdldCIsImNsZWFyRGVwYXJ0bWVudExpc3QiLCJjcmVhdGVEZXBhcnRtZW50QmxvY2siLCJpbml0TWFwIiwiZGF0YXNldCIsImVtYWlsRWwiLCJkZXBhcnRtZW50QmxvY2siLCJwaG9uZUVsIiwicXVlcnlTZWxlY3RvciIsImFkZHJlc3NFbCIsImNvdW50cnkiLCJsb2NhdGlvbkVsIiwiaW5uZXJIVE1MIiwiY2l0eSIsImFkZHJlc3MiLCJlbWFpbCIsInBob25lIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwibWFwQmxvY2siLCJhZGQiLCJkaXNwbGF5U2VhcmNoUXVlcnkiLCJ2YWx1ZSIsInNlYXJjaFVybCIsImFkcmVzc0lucHV0VmFsdWUiLCJsZW5ndGgiLCJmZXRjaCIsInRoZW4iLCJjb3VudHJ5RGF0YSIsImpzb24iLCJkYXRhIiwia2V5IiwiZGVwYXJ0bWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInJlbmRlckNob29zZWREZXBhcnRtZW50Iiwic2V0QXR0cmlidXRlIiwibmFtZSIsImRlcGFydG1lbnRMaXN0IiwiYXBwZW5kQ2hpbGQiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJtZXNzYWdlIiwiZm9jdXMiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJsYXRsbmciLCJteU9wdGlvbnMiLCJ6b29tIiwiZ29vZ2xlIiwibWFwcyIsIkdlb2NvZGVyIiwiY2VudGVyIiwibWFwVHlwZUNvbnRyb2wiLCJtYXBUeXBlQ29udHJvbE9wdGlvbnMiLCJzdHlsZSIsIkxhdExuZyIsIm5hdmlnYXRpb25Db250cm9sIiwibWFwVHlwZUlkIiwiUk9BRE1BUCIsIm1hcCIsIk1hcFR5cGVJZCIsImdvb2dsZUFkZHJlc3MiLCJnZW9jb2RlciIsInN0YXR1cyIsInNldENlbnRlciIsInJlc3VsdHMiLCJHZW9jb2RlclN0YXR1cyIsIk9LIiwiaW5mb3dpbmRvdyIsIkluZm9XaW5kb3ciLCJjb250ZW50IiwibG9jYXRpb24iLCJzaXplIiwibWFya2VyIiwiTWFya2VyIiwidGl0bGUiLCJwb3NpdGlvbiIsImdlb21ldHJ5IiwiZXZlbnQiLCJhZGRMaXN0ZW5lciIsIm9wZW4iLCJjbGVhcklucHV0Il0sIm1hcHBpbmdzIjoiYUFPQUEsU0FBQUEsbUJBQWtCQyxHQWdEZEMsU0FBQUEsRUFBdUJDLEdBQ3ZCRCxlQUFJRSxNQUFBQSxFQUFBQSxPQUFBQSxRQUNBQyxRQUVKQyxJQUFBQSxFQUNBQyxFQUFBQSxPQUFBQSxRQUFBQSxLQUF3QkYsS0FDeEJHLEVBQUFBLE9BQVFKLFFBQUFBLFFBQ1RFLHNCQUZDQyxFQUFzQkosRUFBRUUsT0FBT0ksU0FJakNELFFBQVNELEdBR1AsU0FBSUcsRUFBVUMsR0FDZCxJQUFJQyxFQUFVRCxnQkFBZ0JFLGNBQWMsYUFGeENDLEVBQVlILGdCQUFnQkUsY0FBYyxZQUkxQ0osRUFBUU0sZ0JBQVNGLGNBQUEsVUFDbkJHLEVBQVdDLGdCQUFZSixjQUFBLFVBRXhCSixFQUFBTSxVQUNEQyxFQUFZRSxVQUFNLGtGQUNoQkYsRUFBV0MsV0FBYVIsRUFBT0EsU0FFN0JBLEVBQVFVLE9BQ1ZMLEVBQVVHLFdBQVksS0FBQVIsRUFBQVMsTUFFdkJULEVBQUFVLFVBQ0RMLEVBQVlNLFVBQU8sMEVBQ2pCVixFQUFRTyxXQUFZUixFQUFBVSxTQUVyQlYsRUFBQVcsUUFDRFYsRUFBSUQsVUFBZSwwRUFDakJHLEVBQVFLLFdBQVlSLEVBQUFXLE9BRXJCWCxFQUFBWSxRQUZDVCxFQUFRSyxVQUFZLDBFQUl0Qk4sRUFBQUEsV0FBZ0JXLEVBQVVDLE9BRzdCWixnQkFBQVcsVUFBQUMsT0FBQSxrQ0FGR0MsU0FBU0YsVUFBVUMsT0FBTyxnQ0FqRjVCWixnQkFBZ0JXLFVBQVVHLElBQUksa0NBRGhDRCxTQUFTRSxVQUFBQSxJQUFBQSxnQ0FFUEYsSUFB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QkMsaUJBQWlCLFFBQVN1RixZQTBHNUMsSUFBQW5CLGNBQUFBLEVBQ0VILFNBQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzZWFyY2hCYXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWFyY2hCYXJJbnB1dCcpO1xuY29uc3Qgc2VhcmNoQmFyQ2xlYXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWJhcl9faWNvbi1jbGVhcicpO1xuY29uc3QgZGVwYXJ0bWVudExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVwYXJ0bWVudC1saXN0Jyk7XG5jb25zdCBkZXBhcnRtZW50QmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRlcGFydG1lbnQtYmxvY2tcIik7XG5jb25zdCBtYXBCbG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWFwXCIpO1xuXG5zZWFyY2hCYXJJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGRpc3BsYXlTZWFyY2hRdWVyeSk7XG5zZWFyY2hCYXJDbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsZWFySW5wdXQpO1xuXG5mdW5jdGlvbiBkaXNwbGF5U2VhcmNoUXVlcnkoZSkge1xuICBkZXBhcnRtZW50QmxvY2suY2xhc3NMaXN0LmFkZCgnZGVwYXJ0bWVudC1ibG9jay0tZGlzcGxheS1ub25lJyk7XG4gIG1hcEJsb2NrLmNsYXNzTGlzdC5hZGQoJ2RlcGFydG1lbnQtbWFwLS1kaXNwbGF5LW5vbmUnKTtcblxuICBsZXQgYWRyZXNzSW5wdXRWYWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuICBsZXQgc2VhcmNoVXJsID0gJ2h0dHBzOi8vYXBpLnByaXZhdGJhbmsudWEvcDI0YXBpL3Bib2ZmaWNlP2pzb24mYWRkcmVzcz0nICsgYWRyZXNzSW5wdXRWYWx1ZTtcblxuICBpZiAoYWRyZXNzSW5wdXRWYWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICBzZWFyY2hCYXJDbGVhckJ0bi5jbGFzc0xpc3QuYWRkKCdzZWFyY2gtYmFyX19pY29uLWNsZWFyLS1kaXNwbGF5LW5vbmUnKTtcbiAgICBjbGVhckRlcGFydG1lbnRMaXN0KCk7XG4gIH0gZWxzZSB7XG4gICAgc2VhcmNoQmFyQ2xlYXJCdG4uY2xhc3NMaXN0LnJlbW92ZSgnc2VhcmNoLWJhcl9faWNvbi1jbGVhci0tZGlzcGxheS1ub25lJyk7XG4gICAgcmVuZGVyRGVwYXJ0bWVudExpc3QoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlckRlcGFydG1lbnRMaXN0KCkge1xuICAgIGNvbnN0IGNvdW50cnlEYXRhICA9IGZldGNoKHNlYXJjaFVybCk7XG4gICAgY291bnRyeURhdGFcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgY2xlYXJEZXBhcnRtZW50TGlzdCgpO1xuICAgICAgICBmb3IobGV0IGtleSBpbiBkYXRhKSB7XG4gICAgICAgICAgaWYgKGtleSA8IDEwKSB7XG4gICAgICAgICAgICBsZXQgZGVwYXJ0bWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICBkZXBhcnRtZW50LmNsYXNzTGlzdC5hZGQoJ2RlcGFydG1lbnQtbGlzdF9faXRlbScpO1xuICAgICAgICAgICAgZGVwYXJ0bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlbmRlckNob29zZWREZXBhcnRtZW50KTtcbiAgICAgICAgICAgIGRlcGFydG1lbnQuaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgc2VhcmNoLWJhcl9faWNvbi1zZWFyY2ggIG5vVXNlclNlbGVjdFwiPnNlYXJjaDwvaT4nO1xuICAgICAgICAgICAgZGVwYXJ0bWVudC5pbm5lckhUTUwgKz0gZGF0YVtrZXldLmFkZHJlc3M7XG4gICAgICAgICAgICBkZXBhcnRtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1jaXR5JywgZGF0YVtrZXldLmNpdHkpO1xuICAgICAgICAgICAgZGVwYXJ0bWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY291bnRyeScsIGRhdGFba2V5XS5jb3VudHJ5KTtcbiAgICAgICAgICAgIGRlcGFydG1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWFkZHJlc3MnLCBkYXRhW2tleV0uYWRkcmVzcyk7XG4gICAgICAgICAgICBkZXBhcnRtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1lbWFpbCcsIGRhdGFba2V5XS5lbWFpbCk7XG4gICAgICAgICAgICBkZXBhcnRtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1waG9uZScsIGRhdGFba2V5XS5waG9uZSk7XG4gICAgICAgICAgICBkZXBhcnRtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJywgZGF0YVtrZXldLm5hbWUpO1xuICAgICAgICAgICAgZGVwYXJ0bWVudExpc3QuYXBwZW5kQ2hpbGQoZGVwYXJ0bWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlckNob29zZWREZXBhcnRtZW50KGUpIHtcbiAgICBzZWFyY2hCYXJJbnB1dC52YWx1ZSA9IGUudGFyZ2V0LmRhdGFzZXQuYWRkcmVzcztcbiAgICBsZXQgY2hvb3NlZERlcGFydG1lbnRGdWxsQWRkcmVzcyA9XG4gICAgICBlLnRhcmdldC5kYXRhc2V0LmNpdHkgKyAnLCAnICtcbiAgICAgIGUudGFyZ2V0LmRhdGFzZXQuYWRkcmVzcztcbiAgICBjbGVhckRlcGFydG1lbnRMaXN0KCk7XG4gICAgY3JlYXRlRGVwYXJ0bWVudEJsb2NrKGUudGFyZ2V0LmRhdGFzZXQpO1xuICAgIGluaXRNYXAoY2hvb3NlZERlcGFydG1lbnRGdWxsQWRkcmVzcyk7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVEZXBhcnRtZW50QmxvY2soZGF0YXNldCkge1xuICAgIGxldCBsb2NhdGlvbkVsID0gZGVwYXJ0bWVudEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJyNsb2NhdGlvbicpO1xuICAgIGxldCBhZGRyZXNzRWwgPSBkZXBhcnRtZW50QmxvY2sucXVlcnlTZWxlY3RvcignI2FkZHJlc3MnKTtcbiAgICBsZXQgZW1haWxFbCA9IGRlcGFydG1lbnRCbG9jay5xdWVyeVNlbGVjdG9yKCcjZW1haWwnKTtcbiAgICBsZXQgcGhvbmVFbCA9IGRlcGFydG1lbnRCbG9jay5xdWVyeVNlbGVjdG9yKCcjcGhvbmUnKTtcblxuICAgIGlmIChkYXRhc2V0LmNvdW50cnkpIHtcbiAgICAgIGxvY2F0aW9uRWwuaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgZGVwYXJ0bWVudC1ibG9ja19faWNvbiBub1VzZXJTZWxlY3RcIj5sb2NhdGlvbl9jaXR5PC9pPic7XG4gICAgICBsb2NhdGlvbkVsLmlubmVySFRNTCArPSBkYXRhc2V0LmNvdW50cnk7XG4gICAgfVxuICAgIGlmIChkYXRhc2V0LmNpdHkpIHtcbiAgICAgIGxvY2F0aW9uRWwuaW5uZXJIVE1MICs9ICcsICcgKyBkYXRhc2V0LmNpdHk7XG4gICAgfVxuICAgIGlmIChkYXRhc2V0LmFkZHJlc3MpIHtcbiAgICAgIGFkZHJlc3NFbC5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJtYXRlcmlhbC1pY29ucyBkZXBhcnRtZW50LWJsb2NrX19pY29uIG5vVXNlclNlbGVjdFwiPnBsYWNlPC9pPic7XG4gICAgICBhZGRyZXNzRWwuaW5uZXJIVE1MICs9IGRhdGFzZXQuYWRkcmVzcztcbiAgICB9XG4gICAgaWYgKGRhdGFzZXQuZW1haWwpIHtcbiAgICAgIGVtYWlsRWwuaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgZGVwYXJ0bWVudC1ibG9ja19faWNvbiBub1VzZXJTZWxlY3RcIj5lbWFpbDwvaT4nO1xuICAgICAgZW1haWxFbC5pbm5lckhUTUwgKz0gZGF0YXNldC5lbWFpbDtcbiAgICB9XG4gICAgaWYgKGRhdGFzZXQucGhvbmUpIHtcbiAgICAgIHBob25lRWwuaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgZGVwYXJ0bWVudC1ibG9ja19faWNvbiBub1VzZXJTZWxlY3RcIj5waG9uZTwvaT4nO1xuICAgICAgcGhvbmVFbC5pbm5lckhUTUwgKz0gZGF0YXNldC5waG9uZTtcbiAgICB9XG5cbiAgICBkZXBhcnRtZW50QmxvY2suY2xhc3NMaXN0LnJlbW92ZSgnZGVwYXJ0bWVudC1ibG9jay0tZGlzcGxheS1ub25lJyk7XG4gICAgbWFwQmxvY2suY2xhc3NMaXN0LnJlbW92ZSgnZGVwYXJ0bWVudC1tYXAtLWRpc3BsYXktbm9uZScpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNsZWFySW5wdXQoKSB7XG4gIHNlYXJjaEJhckNsZWFyQnRuLmNsYXNzTGlzdC5hZGQoJ3NlYXJjaC1iYXJfX2ljb24tY2xlYXItLWRpc3BsYXktbm9uZScpO1xuICBkZXBhcnRtZW50QmxvY2suY2xhc3NMaXN0LmFkZCgnZGVwYXJ0bWVudC1ibG9jay0tZGlzcGxheS1ub25lJyk7XG4gIG1hcEJsb2NrLmNsYXNzTGlzdC5hZGQoJ2RlcGFydG1lbnQtbWFwLS1kaXNwbGF5LW5vbmUnKTtcbiAgc2VhcmNoQmFySW5wdXQudmFsdWUgPSAnJztcbiAgY2xlYXJEZXBhcnRtZW50TGlzdCgpO1xuICBzZWFyY2hCYXJJbnB1dC5mb2N1cygpO1xufVxuXG5mdW5jdGlvbiBjbGVhckRlcGFydG1lbnRMaXN0KCkge1xuICB3aGlsZSAoZGVwYXJ0bWVudExpc3QuZmlyc3RDaGlsZCkge1xuICAgICAgZGVwYXJ0bWVudExpc3QucmVtb3ZlQ2hpbGQoZGVwYXJ0bWVudExpc3QuZmlyc3RDaGlsZCk7XG4gIH1cbn1cblxubGV0IGdlb2NvZGVyO1xubGV0IG1hcDtcblxuZnVuY3Rpb24gaW5pdE1hcChjaG9vc2VkRGVwYXJ0bWVudEZ1bGxBZGRyZXNzKSB7XG4gIGxldCBnb29nbGVBZGRyZXNzID0gY2hvb3NlZERlcGFydG1lbnRGdWxsQWRkcmVzcztcbiAgZ2VvY29kZXIgPSBuZXcgZ29vZ2xlLm1hcHMuR2VvY29kZXIoKTtcbiAgbGV0IGxhdGxuZyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoNTAuMjcsIDMwLjMwKTtcbiAgbGV0IG15T3B0aW9ucyA9IHtcbiAgICB6b29tOiAxMCxcbiAgICBjZW50ZXI6IGxhdGxuZyxcbiAgICBtYXBUeXBlQ29udHJvbDogdHJ1ZSxcbiAgICBtYXBUeXBlQ29udHJvbE9wdGlvbnM6IHtcbiAgICAgIHN0eWxlOiBnb29nbGUubWFwcy5NYXBUeXBlQ29udHJvbFN0eWxlLkRST1BET1dOX01FTlVcbiAgICB9LFxuICAgIG5hdmlnYXRpb25Db250cm9sOiB0cnVlLFxuICAgIG1hcFR5cGVJZDogZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLlJPQURNQVBcbiAgfTtcbiAgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcFwiKSwgbXlPcHRpb25zKTtcbiAgaWYgKGdlb2NvZGVyKSB7XG4gICAgZ2VvY29kZXIuZ2VvY29kZSh7XG4gICAgICAnYWRkcmVzcyc6IGdvb2dsZUFkZHJlc3NcbiAgICB9LCBmdW5jdGlvbihyZXN1bHRzLCBzdGF0dXMpIHtcbiAgICAgIGlmIChzdGF0dXMgPT0gZ29vZ2xlLm1hcHMuR2VvY29kZXJTdGF0dXMuT0spIHtcbiAgICAgICAgaWYgKHN0YXR1cyAhPSBnb29nbGUubWFwcy5HZW9jb2RlclN0YXR1cy5aRVJPX1JFU1VMVFMpIHtcbiAgICAgICAgICBtYXAuc2V0Q2VudGVyKHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24pO1xuXG4gICAgICAgICAgdmFyIGluZm93aW5kb3cgPSBuZXcgZ29vZ2xlLm1hcHMuSW5mb1dpbmRvdyh7XG4gICAgICAgICAgICBjb250ZW50OiAnPGI+JyArIGdvb2dsZUFkZHJlc3MgKyAnPC9iPicsXG4gICAgICAgICAgICBzaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxNTAsIDUwKVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgICAgcG9zaXRpb246IHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24sXG4gICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICAgIHRpdGxlOiBnb29nbGVBZGRyZXNzXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFya2VyLCAnY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGluZm93aW5kb3cub3BlbihtYXAsIG1hcmtlcik7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vIHJlc3VsdHMgZm91bmRcIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiR2VvY29kZSB3YXMgbm90IHN1Y2Nlc3NmdWwgZm9yIHRoZSBmb2xsb3dpbmcgcmVhc29uOiBcIiArIHN0YXR1cyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0iXX0=
