"use strict";function displaySearchQuery(e){function t(e){searchBarInput.value=e.target.dataset.address;var t=e.target.dataset.city+", "+e.target.dataset.address;clearDepartmentList(),a(e.target.dataset),initMap(t)}function a(e){var t=departmentBlock.querySelector("#location"),a=departmentBlock.querySelector("#address"),n=departmentBlock.querySelector("#email"),r=departmentBlock.querySelector("#phone");e.country&&(t.innerHTML='<i class="material-icons department-block__icon noUserSelect">location_city</i>',t.innerHTML+=e.country),e.city&&(t.innerHTML+=", "+e.city),e.address&&(a.innerHTML='<i class="material-icons department-block__icon noUserSelect">place</i>',a.innerHTML+=e.address),e.email&&(n.innerHTML='<i class="material-icons department-block__icon noUserSelect">email</i>',n.innerHTML+=e.email),e.phone&&(r.innerHTML='<i class="material-icons department-block__icon noUserSelect">phone</i>',r.innerHTML+=e.phone),departmentBlock.classList.remove("department-block--display-none"),mapBlock.classList.remove("department-map--display-none")}departmentBlock.classList.add("department-block--display-none"),mapBlock.classList.add("department-map--display-none");var n=e.target.value,r="https://api.privatbank.ua/p24api/pboffice?json&address="+n;0===n.length?(searchBarClearBtn.classList.add("search-bar__icon-clear--display-none"),clearDepartmentList()):(searchBarClearBtn.classList.remove("search-bar__icon-clear--display-none"),fetch(r).then(function(e){return e.json()}).then(function(e){clearDepartmentList();for(var a in e)if(a<10){var n=document.createElement("li");n.classList.add("department-list__item"),n.addEventListener("click",t),n.innerHTML='<i class="material-icons search-bar__icon-search  noUserSelect">search</i>',n.innerHTML+=e[a].address,n.setAttribute("data-city",e[a].city),n.setAttribute("data-country",e[a].country),n.setAttribute("data-address",e[a].address),n.setAttribute("data-email",e[a].email),n.setAttribute("data-phone",e[a].phone),n.setAttribute("data-name",e[a].name),departmentList.appendChild(n)}}).catch(function(e){console.log(e.message)}))}function clearInput(){searchBarClearBtn.classList.add("search-bar__icon-clear--display-none"),departmentBlock.classList.add("department-block--display-none"),mapBlock.classList.add("department-map--display-none"),searchBarInput.value="",clearDepartmentList(),searchBarInput.focus()}function clearDepartmentList(){for(;departmentList.firstChild;)departmentList.removeChild(departmentList.firstChild)}function initMap(e){var t=e;geocoder=new google.maps.Geocoder;var a={zoom:10,center:new google.maps.LatLng(50.27,30.3),mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},navigationControl:!0,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("map"),a),geocoder&&geocoder.geocode({address:t},function(e,a){if(a==google.maps.GeocoderStatus.OK)if(a!=google.maps.GeocoderStatus.ZERO_RESULTS){map.setCenter(e[0].geometry.location);var n=new google.maps.InfoWindow({content:"<b>"+t+"</b>",size:new google.maps.Size(150,50)}),r=new google.maps.Marker({position:e[0].geometry.location,map:map,title:t});google.maps.event.addListener(r,"click",function(){n.open(map,r)})}else console.log("No results found");else console.log("Geocode was not successful for the following reason: "+a)})}var searchBarInput=document.querySelector("#searchBarInput"),searchBarClearBtn=document.querySelector(".search-bar__icon-clear"),departmentList=document.querySelector("#department-list"),departmentBlock=document.querySelector(".department-block"),mapBlock=document.querySelector("#map");searchBarInput.addEventListener("keyup",displaySearchQuery),searchBarClearBtn.addEventListener("click",clearInput);var geocoder=void 0,map=void 0;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsic2VhcmNoQmFyQ2xlYXJCdG4iLCJhZGRFdmVudExpc3RlbmVyIiwic2VhcmNoQmFySW5wdXQiLCJlIiwiY2hvb3NlZERlcGFydG1lbnRGdWxsQWRkcmVzcyIsInRhcmdldCIsImNsZWFyRGVwYXJ0bWVudExpc3QiLCJjcmVhdGVEZXBhcnRtZW50QmxvY2siLCJpbml0TWFwIiwiZGF0YXNldCIsImVtYWlsRWwiLCJkZXBhcnRtZW50QmxvY2siLCJwaG9uZUVsIiwicXVlcnlTZWxlY3RvciIsImFkZHJlc3NFbCIsImNvdW50cnkiLCJsb2NhdGlvbkVsIiwiaW5uZXJIVE1MIiwiY2l0eSIsImFkZHJlc3MiLCJlbWFpbCIsInBob25lIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwibWFwQmxvY2siLCJhZGQiLCJkaXNwbGF5U2VhcmNoUXVlcnkiLCJ2YWx1ZSIsInNlYXJjaFVybCIsImFkcmVzc0lucHV0VmFsdWUiLCJsZW5ndGgiLCJmZXRjaCIsInRoZW4iLCJjb3VudHJ5RGF0YSIsImpzb24iLCJkYXRhIiwia2V5IiwiZGVwYXJ0bWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInJlbmRlckNob29zZWREZXBhcnRtZW50Iiwic2V0QXR0cmlidXRlIiwibmFtZSIsImRlcGFydG1lbnRMaXN0IiwiYXBwZW5kQ2hpbGQiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJtZXNzYWdlIiwiZm9jdXMiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJsYXRsbmciLCJteU9wdGlvbnMiLCJ6b29tIiwiZ29vZ2xlIiwibWFwcyIsIkdlb2NvZGVyIiwiY2VudGVyIiwibWFwVHlwZUNvbnRyb2wiLCJtYXBUeXBlQ29udHJvbE9wdGlvbnMiLCJzdHlsZSIsIkxhdExuZyIsIm5hdmlnYXRpb25Db250cm9sIiwibWFwVHlwZUlkIiwiUk9BRE1BUCIsIm1hcCIsIk1hcFR5cGVJZCIsImdvb2dsZUFkZHJlc3MiLCJnZW9jb2RlciIsInN0YXR1cyIsInNldENlbnRlciIsInJlc3VsdHMiLCJHZW9jb2RlclN0YXR1cyIsIk9LIiwiaW5mb3dpbmRvdyIsIkluZm9XaW5kb3ciLCJjb250ZW50IiwibG9jYXRpb24iLCJzaXplIiwibWFya2VyIiwiTWFya2VyIiwidGl0bGUiLCJwb3NpdGlvbiIsImdlb21ldHJ5IiwiZXZlbnQiLCJhZGRMaXN0ZW5lciIsIm9wZW4iLCJjbGVhcklucHV0Il0sIm1hcHBpbmdzIjoiYUFPQUEsU0FBQUEsbUJBQWtCQyxHQWlEZEMsU0FBQUEsRUFBdUJDLEdBQ3ZCRCxlQUFJRSxNQUFBQSxFQUFBQSxPQUFBQSxRQUNBQyxRQUVKQyxJQUFBQSxFQUNBQyxFQUFBQSxPQUFBQSxRQUFBQSxLQUF3QkYsS0FDeEJHLEVBQUFBLE9BQVFKLFFBQUFBLFFBQ1RFLHNCQUZDQyxFQUFzQkosRUFBRUUsT0FBT0ksU0FJakNELFFBQVNELEdBR1AsU0FBSUcsRUFBVUMsR0FDZCxJQUFJQyxFQUFVRCxnQkFBZ0JFLGNBQWMsYUFGeENDLEVBQVlILGdCQUFnQkUsY0FBYyxZQUkxQ0osRUFBUU0sZ0JBQVNGLGNBQUEsVUFDbkJHLEVBQVdDLGdCQUFZSixjQUFBLFVBRXhCSixFQUFBTSxVQUNEQyxFQUFZRSxVQUFNLGtGQUNoQkYsRUFBV0MsV0FBYVIsRUFBT0EsU0FFN0JBLEVBQVFVLE9BQ1ZMLEVBQVVHLFdBQVksS0FBQVIsRUFBQVMsTUFFdkJULEVBQUFVLFVBQ0RMLEVBQVlNLFVBQU8sMEVBQ2pCVixFQUFRTyxXQUFZUixFQUFBVSxTQUVyQlYsRUFBQVcsUUFDRFYsRUFBSUQsVUFBZSwwRUFDakJHLEVBQVFLLFdBQVlSLEVBQUFXLE9BRXJCWCxFQUFBWSxRQUZDVCxFQUFRSyxVQUFZLDBFQUl0Qk4sRUFBQUEsV0FBZ0JXLEVBQVVDLE9BRzdCWixnQkFBQVcsVUFBQUMsT0FBQSxrQ0FGR0MsU0FBU0YsVUFBVUMsT0FBTyxnQ0FsRjVCWixnQkFBZ0JXLFVBQVVHLElBQUksa0NBRGhDRCxTQUFTRSxVQUFBQSxJQUFBQSxnQ0FFUEYsSUFBQUEsRUFBdUJyQixFQUFBRSxPQUFBc0IsTUFHbkJDLEVBQVksMERBQTREQyxFQUE1RCxJQUFaRCxFQUFZRSxRQUdkOUIsa0JBQWtCc0IsVUFBVUcsSUFBSSx3Q0FEbENuQix3QkFFRUEsa0JBQUFBLFVBQUFBLE9BQUFBLHdDQVFxQnlCLE1BQU1ILEdBQTNCSSxLQUFNQyxTQUFBQSxHQUNOQSxPQUFBQSxFQUNRQyxTQUdMRixLQUFLLFNBQUFHLEdBQ0o3QixzQkFDQSxJQUFJLElBQUk4QixLQUFPRCxFQUNiLEdBQUlDLEVBQUosR0FBYyxDQUNaLElBQUlDLEVBQWFDLFNBQVNDLGNBQWMsTUFDeENGLEVBQVdmLFVBQVVHLElBQUkseUJBQ3pCWSxFQUFXcEMsaUJBQWlCLFFBQVN1QyxHQUNyQ0gsRUFBV3BCLFVBQVksNkVBQ3ZCb0IsRUFBV3BCLFdBQWFrQixFQUFLQyxHQUFLakIsUUFDbENrQixFQUFXSSxhQUFhLFlBQWFOLEVBQUtDLEdBQUtsQixNQUMvQ21CLEVBQVdJLGFBQWEsZUFBZ0JOLEVBQUtDLEdBQUtyQixTQUNsRHNCLEVBQVdJLGFBQWEsZUFBZ0JOLEVBQUtDLEdBQUtqQixTQUNsRGtCLEVBQVdJLGFBQWEsYUFBY04sRUFBS0MsR0FBS2hCLE9BQ2hEaUIsRUFBV0ksYUFBYSxhQUFjTixFQUFLQyxHQUFLZixPQUNoRGdCLEVBQVdJLGFBQWEsWUFBYU4sRUFBS0MsR0FBS00sTUFDL0NDLGVBQWVDLFlBQVlQLE1BSy9CUSxNQUFBQSxTQUFBQSxHQXhCSkEsUUFBQUMsSUFBQUMsRUFBQUMsWUF3RUZ4QixTQUFBQSxhQUNBdEIsa0JBQWV5QixVQUFmRixJQUFBLHdDQUNBbkIsZ0JBQUFBLFVBQUFBLElBQUFBLGtDQUNBSixTQUFBQSxVQUFlK0MsSUFBZixnQ0FDRC9DLGVBQUF5QixNQUFBLEdBRkNyQixzQkFJRkosZUFBU0ksUUFHTixTQUFBQSxzQkFDRixLQUFBcUMsZUFBQU8sWUFGS1AsZUFBZVEsWUFBWVIsZUFBZU8sWUFVOUMsU0FBSUUsUUFBU2hELEdBQ2IsSUFBSWlELEVBQVlqRCxFQUNka0QsU0FEYyxJQUFBQyxPQUFBQyxLQUFBQyxTQUVkQyxJQUNBQyxHQUNBQyxLQUFBQSxHQUNFQyxPQUhNVCxJQUZNRyxPQUFBQyxLQUFBTSxPQUFBLE1BQUEsTUFJU0gsZ0JBSlQsRUFPZEksdUJBQ0FDLE1BQUFBLE9BQVdULEtBQU9DLG9CQUFlUyxlQUVuQ0MsbUJBQVUsRUFDVkYsVUFBQVQsT0FBY0MsS0FBQVcsVUFBQUYsU0FFVkMsSUFBQSxJQUFBWCxPQUFXYSxLQUFBQSxJQUFBQSxTQUFBQSxlQUFBQSxPQUFBQSxHQURiQyxVQUdFQSxTQUFJQyxTQUNGbkQsUUFBSW1ELEdBQ0ZKLFNBQUlLLEVBQVVDLEdBRmxCLEdBQUlGLEdBQVVmLE9BQU9DLEtBQUtpQixlQUFlQyxHQUlyQyxHQUFBSixHQUFJSyxPQUFhbkIsS0FBSUQsZUFBWXFCLGFBQVcsQ0FDMUNDLElBQUFBLFVBQVNMLEVBQVFKLEdBQUFBLFNBQVJVLFVBRGlDLElBQTVDSCxFQUFBLElBQUFwQixPQUFBQyxLQUFBb0IsWUFDRUMsUUFBUyxNQUFRVCxFQUFnQixPQUluQ1csS0FBSUMsSUFBQUEsT0FBYXpCLEtBQU9DLEtBQUt5QixJQUFBQSxNQUczQkMsRUFBT2QsSUFBQUEsT0FBQUEsS0FBQUEsUUFIVGUsU0FBQVgsRUFBQSxHQUFBWSxTQUFBTixTQUtBdkIsSUFBT0MsSUFDTG1CLE1BQUFBLElBZEpwQixPQWlCT0MsS0FBQTZCLE1BQUFDLFlBQUFOLEVBQUEsUUFBQSxXQUNMbkMsRUFBWTBDLEtBQUFyQixJQUFBYyxVQUlmbkMsUUFBQUMsSUFBQSx5QkFHTkQsUUFBQUMsSUFBQSx3REFBQXdCLEtBL0pELElBQU1wRSxlQUFpQm9DLFNBQVN6QixjQUFjLG1CQUN4Q2Isa0JBQW9Cc0MsU0FBU3pCLGNBQWMsMkJBRDNDWCxlQUFpQm9DLFNBQVN6QixjQUFjLG9CQUN4Q2IsZ0JBQW9Cc0MsU0FBU3pCLGNBQWMscUJBQzNDOEIsU0FBQUEsU0FBaUJMLGNBQVN6QixRQUVoQ1gsZUFBaUJvQyxpQkFBU3pCLFFBQWNhLG9CQUd4QzFCLGtCQUFrQkMsaUJBQWlCLFFBQVN1RixZQTJHNUMsSUFBQW5CLGNBQUFBLEVBQ0VILFNBQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzZWFyY2hCYXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWFyY2hCYXJJbnB1dCcpO1xuY29uc3Qgc2VhcmNoQmFyQ2xlYXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWJhcl9faWNvbi1jbGVhcicpO1xuY29uc3QgZGVwYXJ0bWVudExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVwYXJ0bWVudC1saXN0Jyk7XG5jb25zdCBkZXBhcnRtZW50QmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRlcGFydG1lbnQtYmxvY2tcIik7XG5jb25zdCBtYXBCbG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWFwXCIpO1xuXG5zZWFyY2hCYXJJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGRpc3BsYXlTZWFyY2hRdWVyeSk7XG5zZWFyY2hCYXJDbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsZWFySW5wdXQpO1xuXG5mdW5jdGlvbiBkaXNwbGF5U2VhcmNoUXVlcnkoZSkge1xuICBkZXBhcnRtZW50QmxvY2suY2xhc3NMaXN0LmFkZCgnZGVwYXJ0bWVudC1ibG9jay0tZGlzcGxheS1ub25lJyk7XG4gIG1hcEJsb2NrLmNsYXNzTGlzdC5hZGQoJ2RlcGFydG1lbnQtbWFwLS1kaXNwbGF5LW5vbmUnKTtcblxuICBsZXQgYWRyZXNzSW5wdXRWYWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuICBsZXQgc2VhcmNoVXJsID0gJ2h0dHBzOi8vYXBpLnByaXZhdGJhbmsudWEvcDI0YXBpL3Bib2ZmaWNlP2pzb24mYWRkcmVzcz0nICsgYWRyZXNzSW5wdXRWYWx1ZTtcblxuICBpZiAoYWRyZXNzSW5wdXRWYWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICBzZWFyY2hCYXJDbGVhckJ0bi5jbGFzc0xpc3QuYWRkKCdzZWFyY2gtYmFyX19pY29uLWNsZWFyLS1kaXNwbGF5LW5vbmUnKTtcbiAgICBjbGVhckRlcGFydG1lbnRMaXN0KCk7XG4gIH0gZWxzZSB7XG4gICAgc2VhcmNoQmFyQ2xlYXJCdG4uY2xhc3NMaXN0LnJlbW92ZSgnc2VhcmNoLWJhcl9faWNvbi1jbGVhci0tZGlzcGxheS1ub25lJyk7XG4gICAgcmVuZGVyRGVwYXJ0bWVudExpc3QoKTtcbiAgICAvLyBpbml0aWFsaXplKCk7XG4gIH1cblxuICBmdW5jdGlvbiByZW5kZXJEZXBhcnRtZW50TGlzdCgpIHtcbiAgICBjb25zdCBjb3VudHJ5RGF0YSAgPSBmZXRjaChzZWFyY2hVcmwpO1xuICAgIGNvdW50cnlEYXRhXG4gICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgIGNsZWFyRGVwYXJ0bWVudExpc3QoKTtcbiAgICAgICAgZm9yKGxldCBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgIGlmIChrZXkgPCAxMCkge1xuICAgICAgICAgICAgbGV0IGRlcGFydG1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgZGVwYXJ0bWVudC5jbGFzc0xpc3QuYWRkKCdkZXBhcnRtZW50LWxpc3RfX2l0ZW0nKTtcbiAgICAgICAgICAgIGRlcGFydG1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZW5kZXJDaG9vc2VkRGVwYXJ0bWVudCk7XG4gICAgICAgICAgICBkZXBhcnRtZW50LmlubmVySFRNTCA9ICc8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIHNlYXJjaC1iYXJfX2ljb24tc2VhcmNoICBub1VzZXJTZWxlY3RcIj5zZWFyY2g8L2k+JztcbiAgICAgICAgICAgIGRlcGFydG1lbnQuaW5uZXJIVE1MICs9IGRhdGFba2V5XS5hZGRyZXNzO1xuICAgICAgICAgICAgZGVwYXJ0bWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2l0eScsIGRhdGFba2V5XS5jaXR5KTtcbiAgICAgICAgICAgIGRlcGFydG1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWNvdW50cnknLCBkYXRhW2tleV0uY291bnRyeSk7XG4gICAgICAgICAgICBkZXBhcnRtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1hZGRyZXNzJywgZGF0YVtrZXldLmFkZHJlc3MpO1xuICAgICAgICAgICAgZGVwYXJ0bWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZW1haWwnLCBkYXRhW2tleV0uZW1haWwpO1xuICAgICAgICAgICAgZGVwYXJ0bWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGhvbmUnLCBkYXRhW2tleV0ucGhvbmUpO1xuICAgICAgICAgICAgZGVwYXJ0bWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScsIGRhdGFba2V5XS5uYW1lKTtcbiAgICAgICAgICAgIGRlcGFydG1lbnRMaXN0LmFwcGVuZENoaWxkKGRlcGFydG1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByZW5kZXJDaG9vc2VkRGVwYXJ0bWVudChlKSB7XG4gICAgc2VhcmNoQmFySW5wdXQudmFsdWUgPSBlLnRhcmdldC5kYXRhc2V0LmFkZHJlc3M7XG4gICAgbGV0IGNob29zZWREZXBhcnRtZW50RnVsbEFkZHJlc3MgPVxuICAgICAgZS50YXJnZXQuZGF0YXNldC5jaXR5ICsgJywgJyArXG4gICAgICBlLnRhcmdldC5kYXRhc2V0LmFkZHJlc3M7XG4gICAgY2xlYXJEZXBhcnRtZW50TGlzdCgpO1xuICAgIGNyZWF0ZURlcGFydG1lbnRCbG9jayhlLnRhcmdldC5kYXRhc2V0KTtcbiAgICBpbml0TWFwKGNob29zZWREZXBhcnRtZW50RnVsbEFkZHJlc3MpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlRGVwYXJ0bWVudEJsb2NrKGRhdGFzZXQpIHtcbiAgICBsZXQgbG9jYXRpb25FbCA9IGRlcGFydG1lbnRCbG9jay5xdWVyeVNlbGVjdG9yKCcjbG9jYXRpb24nKTtcbiAgICBsZXQgYWRkcmVzc0VsID0gZGVwYXJ0bWVudEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJyNhZGRyZXNzJyk7XG4gICAgbGV0IGVtYWlsRWwgPSBkZXBhcnRtZW50QmxvY2sucXVlcnlTZWxlY3RvcignI2VtYWlsJyk7XG4gICAgbGV0IHBob25lRWwgPSBkZXBhcnRtZW50QmxvY2sucXVlcnlTZWxlY3RvcignI3Bob25lJyk7XG5cbiAgICBpZiAoZGF0YXNldC5jb3VudHJ5KSB7XG4gICAgICBsb2NhdGlvbkVsLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIGRlcGFydG1lbnQtYmxvY2tfX2ljb24gbm9Vc2VyU2VsZWN0XCI+bG9jYXRpb25fY2l0eTwvaT4nO1xuICAgICAgbG9jYXRpb25FbC5pbm5lckhUTUwgKz0gZGF0YXNldC5jb3VudHJ5O1xuICAgIH1cbiAgICBpZiAoZGF0YXNldC5jaXR5KSB7XG4gICAgICBsb2NhdGlvbkVsLmlubmVySFRNTCArPSAnLCAnICsgZGF0YXNldC5jaXR5O1xuICAgIH1cbiAgICBpZiAoZGF0YXNldC5hZGRyZXNzKSB7XG4gICAgICBhZGRyZXNzRWwuaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgZGVwYXJ0bWVudC1ibG9ja19faWNvbiBub1VzZXJTZWxlY3RcIj5wbGFjZTwvaT4nO1xuICAgICAgYWRkcmVzc0VsLmlubmVySFRNTCArPSBkYXRhc2V0LmFkZHJlc3M7XG4gICAgfVxuICAgIGlmIChkYXRhc2V0LmVtYWlsKSB7XG4gICAgICBlbWFpbEVsLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIGRlcGFydG1lbnQtYmxvY2tfX2ljb24gbm9Vc2VyU2VsZWN0XCI+ZW1haWw8L2k+JztcbiAgICAgIGVtYWlsRWwuaW5uZXJIVE1MICs9IGRhdGFzZXQuZW1haWw7XG4gICAgfVxuICAgIGlmIChkYXRhc2V0LnBob25lKSB7XG4gICAgICBwaG9uZUVsLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIGRlcGFydG1lbnQtYmxvY2tfX2ljb24gbm9Vc2VyU2VsZWN0XCI+cGhvbmU8L2k+JztcbiAgICAgIHBob25lRWwuaW5uZXJIVE1MICs9IGRhdGFzZXQucGhvbmU7XG4gICAgfVxuXG4gICAgZGVwYXJ0bWVudEJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2RlcGFydG1lbnQtYmxvY2stLWRpc3BsYXktbm9uZScpO1xuICAgIG1hcEJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2RlcGFydG1lbnQtbWFwLS1kaXNwbGF5LW5vbmUnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjbGVhcklucHV0KCkge1xuICBzZWFyY2hCYXJDbGVhckJ0bi5jbGFzc0xpc3QuYWRkKCdzZWFyY2gtYmFyX19pY29uLWNsZWFyLS1kaXNwbGF5LW5vbmUnKTtcbiAgZGVwYXJ0bWVudEJsb2NrLmNsYXNzTGlzdC5hZGQoJ2RlcGFydG1lbnQtYmxvY2stLWRpc3BsYXktbm9uZScpO1xuICBtYXBCbG9jay5jbGFzc0xpc3QuYWRkKCdkZXBhcnRtZW50LW1hcC0tZGlzcGxheS1ub25lJyk7XG4gIHNlYXJjaEJhcklucHV0LnZhbHVlID0gJyc7XG4gIGNsZWFyRGVwYXJ0bWVudExpc3QoKTtcbiAgc2VhcmNoQmFySW5wdXQuZm9jdXMoKTtcbn1cblxuZnVuY3Rpb24gY2xlYXJEZXBhcnRtZW50TGlzdCgpIHtcbiAgd2hpbGUgKGRlcGFydG1lbnRMaXN0LmZpcnN0Q2hpbGQpIHtcbiAgICAgIGRlcGFydG1lbnRMaXN0LnJlbW92ZUNoaWxkKGRlcGFydG1lbnRMaXN0LmZpcnN0Q2hpbGQpO1xuICB9XG59XG5cbmxldCBnZW9jb2RlcjtcbmxldCBtYXA7XG5cbmZ1bmN0aW9uIGluaXRNYXAoY2hvb3NlZERlcGFydG1lbnRGdWxsQWRkcmVzcykge1xuICBsZXQgZ29vZ2xlQWRkcmVzcyA9IGNob29zZWREZXBhcnRtZW50RnVsbEFkZHJlc3M7XG4gIGdlb2NvZGVyID0gbmV3IGdvb2dsZS5tYXBzLkdlb2NvZGVyKCk7XG4gIGxldCBsYXRsbmcgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKDUwLjI3LCAzMC4zMCk7XG4gIGxldCBteU9wdGlvbnMgPSB7XG4gICAgem9vbTogMTAsXG4gICAgY2VudGVyOiBsYXRsbmcsXG4gICAgbWFwVHlwZUNvbnRyb2w6IHRydWUsXG4gICAgbWFwVHlwZUNvbnRyb2xPcHRpb25zOiB7XG4gICAgICBzdHlsZTogZ29vZ2xlLm1hcHMuTWFwVHlwZUNvbnRyb2xTdHlsZS5EUk9QRE9XTl9NRU5VXG4gICAgfSxcbiAgICBuYXZpZ2F0aW9uQ29udHJvbDogdHJ1ZSxcbiAgICBtYXBUeXBlSWQ6IGdvb2dsZS5tYXBzLk1hcFR5cGVJZC5ST0FETUFQXG4gIH07XG4gIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBcIiksIG15T3B0aW9ucyk7XG4gIGlmIChnZW9jb2Rlcikge1xuICAgIGdlb2NvZGVyLmdlb2NvZGUoe1xuICAgICAgJ2FkZHJlc3MnOiBnb29nbGVBZGRyZXNzXG4gICAgfSwgZnVuY3Rpb24ocmVzdWx0cywgc3RhdHVzKSB7XG4gICAgICBpZiAoc3RhdHVzID09IGdvb2dsZS5tYXBzLkdlb2NvZGVyU3RhdHVzLk9LKSB7XG4gICAgICAgIGlmIChzdGF0dXMgIT0gZ29vZ2xlLm1hcHMuR2VvY29kZXJTdGF0dXMuWkVST19SRVNVTFRTKSB7XG4gICAgICAgICAgbWFwLnNldENlbnRlcihyZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uKTtcblxuICAgICAgICAgIHZhciBpbmZvd2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coe1xuICAgICAgICAgICAgY29udGVudDogJzxiPicgKyBnb29nbGVBZGRyZXNzICsgJzwvYj4nLFxuICAgICAgICAgICAgc2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMTUwLCA1MClcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiByZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uLFxuICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICB0aXRsZTogZ29vZ2xlQWRkcmVzc1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbmZvd2luZG93Lm9wZW4obWFwLCBtYXJrZXIpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJObyByZXN1bHRzIGZvdW5kXCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkdlb2NvZGUgd2FzIG5vdCBzdWNjZXNzZnVsIGZvciB0aGUgZm9sbG93aW5nIHJlYXNvbjogXCIgKyBzdGF0dXMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59Il19
